# summarize_all
dat %>%
  group_by(symbol) %>%
  summarize(across(everything(), max))

# select by string variable (dynamic)
dat %>%
    select(!!var_name)

# filter by string variable
dat %>%
    filter(!!rlang::sym(var_name) > 0)

# select columns whose name starts with "foo"
dat %>%
  select(starts_with("foo"))

# select columns whose names contain "foo"
dat %>%
  select(matches("foo"))

# arrange by string variable
dat %>%
    arrange(!!sym(var_name))

# rbind multiple tibbles
bind_rows(df1, df2, ..)

# rename columns
df %>%
  rename("new" = old)
df %>%
  rename(!!new := old)

# get first row as two-column key-value dataframe;
# "glimpse()" can also be used, but dataframe easier to format in rmd
df[1, ] %>%
  t() %>%
  as.data.frame() %>%
  rownames_to_column("field")

# cbind / join list of tables
purrr::reduce(tbls, dplyr::full_join, by = "id")

# drop duplicates
dat %>%
  distinct()

# pivot wide to long
df %>%
  pivot_longer(everything(), names_to = "xx", values_to = "yy")

df %>%
  pivot_longer(c("col1", "col2",...), names_to = "xx", values_to = "yy")

df %>%
  pivot_longer(!col, names_to = "xx", values_to = "yy")

# long to wide
df %>%
  pivot_wider(id_cols = zz, names_from = xx, values_from = yy)

# recode variable levels
df %>% 
  mutate(foo = recode(foo, old1="new1", old2="new2", ...))

#
# filtering
#

# string matching (starts with, ends with, regex..)
df %>%
  filter(str_detect(foo, "^bar"))

#
# rank
#
df %>%
  mutate(rank = dense_rank(desc(foo)))

#
# summarization
#

# concatenate string field by group
df %>% 
  group_by(grp) %>% 
  summarise(combined=paste(foo, collapse = ", "))

# vi:syntax=r
